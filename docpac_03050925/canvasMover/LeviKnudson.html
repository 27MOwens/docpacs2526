<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Mover</title>
</head>
<body>
    <script> 
        new Image()
        var avatar = {
            x: 0,
            y : 0,
            width: 40,
            height: 40,
            img: Image.src = "LeviKnudson.jpg"
        }
        window.addEventListener('gamepadconnected', (event) => {
            console.log("Gamepad connected");
            //run gamepad listener to detect button presses
            gamepadListener();
        });
        function gamepadListener() {
            //shortcut to access p1 Gamepad
            const gamepad = navigator.getGamepads()[0];
            //shrortcut to access joystick axes
            const xAxis = gamepad.axes[0];
            const yAxis = gamepad.axes[1];
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const w = avatar.width;
            const h = avatar.height;
            var x = avatar.x;
            var y = avatar.y;
            deadZone = 0.05;
            if (yAxis < -deadZone || yAxis > deadZone || xAxis < -deadZone || xAxis > deadZone) {
                var Velocityx = xAxis * 2;
                var VelocityY = yAxis * 2;
                x += Velocityx;
                y += VelocityY;
                console.log("VelocityX: " + Velocityx + " VelocityY: " + VelocityY);
                console.log("x: " + x + " y: " + y);
                if (x < 0) {
                    x = 0;
                }
                if (y < 0) {
                    y = 0;
                }
                if (x + w > canvas.width) {
                    x = canvas.width - w;
                }
                if (y + h > canvas.height) {
                    y = canvas.height - h;
                }
                avatarimg = document.getElementById("avatarIMG");
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(avatar.img, x, y, w, h);
            }
            avatar.x = x;
            avatar.y = y;
            requestAnimationFrame(gamepadListener);
        }
    </script>
    <canvas width="800px" height="600px" id="canvas"></canvas>
</body>
</html>